# zaki_night
 > Zakinight √© um sistema de alto desempenho desenvolvido com JavaScript para criar um bot para WhatsApp, suporte para criar qualquer intera√ß√£o, como atendimento ao cliente, envio de m√≠dia, reconhecimento de senten√ßas baseado em intelig√™ncia artificial e todos os tipos de arquitetura de design para WhatsApp.

## Comece r√°pido e f√°cil! API oficial!

√â uma API alternativa de alto desempenho para o whatzapp, voc√™ pode enviar mensagens de texto, arquivos, imagens, v√≠deos e muito mais.

Lembre-se, a API foi desenvolvida em uma plataforma chamada RESTful Web services, fornecendo interoperabilidade entre sistemas de computador na Internet.

Ele usa um conjunto de opera√ß√µes bem definidas que se aplicam a todos os recursos de informa√ß√£o: o pr√≥prio HTTP define um pequeno conjunto de opera√ß√µes, sendo o mais importante POST, GET, PUT e DELETE.

Use-o em sua linguagem favorita como PHP, Python, C# e outros. desde que seu idioma seja suportado com o protocolo HTTP, voc√™ economizar√° tempo e dinheiro. voc√™ n√£o precisa saber como o Venom funciona, temos a documenta√ß√£o completa da API, de forma profissional!


## Fun√ß√µes do Zaki Night

|                                                               |   |
|---------------------------------------------------------------|---|
| üöª | de atualiza√ß√£o autom√°tica de QR ‚úî |
| üìÅ Enviar **texto, imagem, v√≠deo, √°udio e docs** | ‚úî |
| üë• Obtenha **contatos, chats, grupos, membros do grupo, Lista de blocos** | ‚úî |
| üìû Envie contatos | ‚úî |
| Enviar bot√µes | ‚úî |
| Envie adesivos | ‚úî |
| Envie adesivos GIF | ‚úî |
| Sess√µes m√∫ltiplas | ‚úî |
| ‚è© Mensagens de encaminhamento | ‚úî |
| üì• Receba | mensagens ‚úî |
| üë§ inserir se√ß√£o de usu√°rio | ‚úî |
| üìç Envie localiza√ß√£o!! | ‚úî |
| üï∏üï∏ **e muito mais** | ‚úî |

## Instala√ß√£o

Instalando o reposit√≥rio atual "voc√™ pode baixar a vers√£o beta do reposit√≥rio atual!"

'''bash
> npm i github:zeronightk/zakinight
```
## Come√ßar Multidevice e Normal

''javascript
// Suporta ES6
// importa√ß√£o { criar, Whatsapp } de 'zaki-night';
zaki const  = necess√°rio ('zaki-night');

zaki
  .create({
    session: 'session-name', //nome da sess√£o
    multidevice: false // para vers√£o n√£o uso multidevice falso.(default: true)
  })
  .then((client) => start(client))
  .catch((erro) => {
    console.log(erro);
  });
function start(client) {
  client.onMessage((message) => {
    if (message.body === 'Hi' && message.isGroupMsg === false) {
      client
        .sendText(message.from, 'Bem vindo zaki')
        .then((result) => {
          console.log('Result: ', result); ///retorno sucesso de objeto
        })
        .catch((erro) => {
          console.error('Error when sending: ', erro); //erro de objeto de retorno
        });
    }
  });
}
```
###### Depois de executar a fun√ß√£o 'create()', **venom** criar√° uma inst√¢ncia da web do whatsapp. Se voc√™ n√£o estiver logado, imprimir√° um c√≥digo QR no terminal. Escaneie com seu telefone e voc√™ est√° pronto para ir!

##### Zaki se lembrar√° da sess√£o para que n√£o haja necessidade de autenticar todas as vezes.

##### As sess√µes de m√∫ltiplos podem ser criadas ao mesmo tempo, escolhendo um nome de sess√£o para 'create()':

```javascript
// Init sales whatsapp bot
venom.create('sales').then((salesClient) => {...});
// Init  suporte whatsapp bot
venom.create('support').then((supportClient) => {...});
```

<br>

## Opcionais criar par√¢metros

O terceiro par√¢metro do m√©todo Zaki 'create()' pode ter os seguintes par√¢metros opcionais:

Se voc√™ estiver usando o servidor 'Linux' n√£o se esque√ßa de passar o '-agente do usu√°rio' args
[Par√¢metros originais no browserArgs] (https://github.com/orkestral/venom/blob/master/src/config/puppeteer.config.ts)

```javascript
const venom = require('zaki-night');
venom
  .create(
    //session
    'sessionName', /Passe o nome do cliente que deseja iniciar o bot
    //catchQR
    (base64Qrimg, asciiQR, attempts, urlCode) => {
      console.log('Number of attempts to read the qrcode: ', attempts);
      console.log('Terminal qrcode: ', asciiQR);
      console.log('base64 image string qrcode: ', base64Qrimg);
      console.log('urlCode (data-ref): ', urlCode);
    },
    // statusFind
    (statusSession, session) => {
      console.log('Status Session: ', statusSession); //return isLogged || notLogged || browserClose || qrReadSuccess || qrReadFail || autocloseCalled || desconnectedMobile || deleteToken || chatsAvailable || deviceNotConnected || serverWssNotConnected || noOpenBrowser
      // Criar sess√£o wss retornar servidor de caso "serverClose" para fechar
      console.log('Session name: ', session);
    },
    // opc√µes
    {
      multidevice: false, //para vers√£o n√£o uso multidevice falso(default: true)
      folderNameToken: 'tokens', ///nome da pasta ao salvar tokens
      mkdirFolderToken: '', /folder directory tokens, apenas dentro da pasta zaki, exemplo: { mkdirFolderToken: '/node_modules', } //salvar√° a pasta de tokens no diret√≥rio node_modules
      headless: true, //chrome sem cabe√ßa
      devtools: false, //  Abrir devtools por padr√£o
      useChrome: true, // Se falso usar√° a ocorr√™ncia de Chrome
      debug: false, //Abre uma sess√£o de depura√ß√£o
      logQR: true, // Logs QR automaticamente no terminal
      browserWS: '', //se voc√™ quiser usar browserWSEndpoint
      browserArgs: [''], /Par√¢metros originais ---Parameters a serem adicionados na inst√¢ncia do navegador chrome
      puppeteerOptions: {}, // Ser√° passado para puppeteer.launch
      disableSpins: true, // Desativar√° a anima√ß√£o Spinnies, √∫til para cont√™ineres (docker) para um melhor log
      disableWelcome: true, // Desativar√° a mensagem de boas-vindas que aparece no in√≠cio
      updatesLog: true, // Logs atualiza√ß√µes de informa√ß√µes automaticamente no terminal
      autoClose: 60000, //Fecha automaticamente o veneno-bot somente ao digitalizar o c√≥digo QR (padr√£o de 60 segundos, se voc√™ quiser deslig√°-lo, atribuir 0 ou false)
      createPathFileToken: false, //  cria uma pasta ao inserir um objeto no navegador do cliente, para trabalhar √© necess√°rio passar os par√¢metros na fun√ß√£o criar browserSessionToken
      chromiumVersion: '818858', //Vers√£o do navegador que ser√° usado. As cordas de revis√£o podem ser obtidas a partir de omahaproxy.appspot.com.
      addProxy: [''], // Adicionar exemple servidor proxy : [e1.p.webshare.io:01, e1.p.webshare.io:01]
      userProxy: '', // Nome de usu√°rio de login proxy
      userPass: '' // Proxy senha
    },
    // BrowserSessionToken
    // Para receber o token do cliente, use a fun√ß√£o aguarde clinet.getSessionTokenBrowser()
    {
      WABrowserId: '"UnXjH....."',
      WASecretBundle:
        '{"key":"+i/nRgWJ....","encKey":"kGdMR5t....","macKey":"+i/nRgW...."}',
      WAToken1: '"0i8...."',
      WAToken2: '"1@lPpzwC...."'
 },
    // BrowserInstance
    (browser, waPage) => {
      console.log('Browser PID:', browser.process().pid);
      waPage.screenshot({ path: 'screenshot.png' });
    }
  )
  .then((client) => {
    start(client);
  })
  .catch((erro) => {
    console.log(erro);
  });
```
## Sess√£o de status de retorno de chamada

Obt√©m o retorno se a sess√£o estiver 'isLogged' ou 'notLogged' ou 'browserClose' ou 'qrReadSuccess' ou 'qrReadFail' ou 'autocloseCalled' ou 'desconectadoMobilizar' ou 'excluirToken' ou 'chats Dispon√≠vel' ou dispositivo 'N√£o Conectado' ou 'serverWssNotConnected' ou 'noOpenBrowser' ou 'Criar sess√£o wss retornar servidor de caso "serverClose" para fechar'


| Status                  | Condi√ß√£o                                                                                                                                                      |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| `isLogged`              | Quando o usu√°rio j√° est√° logado no navegador                                                                                                  |
| `notLogged`             | Quando o usu√°rio n√£o est√° conectado ao navegador, √© necess√°rio digitalizar o c√≥digo QR atrav√©s do celular na op√ß√£o WhatsApp Web                    
| `browserClose`          | Se o navegador estiver fechado, este par√¢metro ser√° devolvido                                                                                    
| `qrReadSuccess`         | Se o usu√°rio n√£o estiver logado, o c√≥digo QR ser√° repassado no terminal, uma chamada de retorno ser√° devolvida. Ap√≥s a leitura correta pelo celular este par√¢metro √© devolvido |
| `qrReadFail`            |  Se o navegador parar quando a varredura de c√≥digo QR estiver em andamento, este par√¢metro ser√° devolvido                                          | 
| `autocloseCalled`       | O navegador foi fechado usando o comando autoClose                                                                                                 |
| `desconnectedMobile`    | Cliente se desconectou a | m√≥veis                                                                                                                  |
| `serverClose`           |  Cliente se desconectou ao WSS                                                                                                                     |
| `deleteToken`           | Se voc√™ passar verdadeiro dentro da fun√ß√£o  `client.getSessionTokenBrowser(true)`                                                                  |
| `chatsAvailable`        |Quando Zaki estiver conectado √† lista de bate-papo                                                                                                  |
| `deviceNotConnected`    | Chat n√£o dispon√≠vel porque o telefone est√° desconectado `(Trying to connect to the phone)`                                                         |
| `serverWssNotConnected` | O endere√ßo wss n√£o foi encontrado!                                                                                                                 |
| `noOpenBrowser`         | IN√£o foi encontrado no navegador, ou algum comando est√° faltando em args                                                                           |

```javascript
const zaki = require('zaki-night');
Zaki
  .create(
    'sessionName',
    undefined,
    (statusSession, session) => {
      console.log('Status Session: ', statusSession);
     eturn isLogged || || n√£o-|| browserClose || qrLelesuccess || qrReadFail || autocloseCalled || || desconectado doMobile deleteToken || chats Dispon√≠veis || dispositivoNconectado || servidorWssNotConectado || noOpenBrowser
      // Criar sess√£o wss retornar servidor de caso "serverClose" para fechar     
     console.log('Session name: ', session);
    },
    {
      multidevice: false // para vers√£o n√£o uso multidevice falso.(default: true)
    }
  )
  .then((client) => {
    start(client);
  })
  .catch((erro) => {
    console.log(erro);
  });
```
## QR Code exportador

Por c√≥digo QR padr√£o aparecer√° no terminal. Se voc√™ precisa passar o QR
em outro lugar aquis como:

```javascript
const fs = require('fs');
const zaki = require('zaki-night');
Zaki
  .create(
    'sessionName',
    (base64Qr, asciiQR, attempts, urlCode) => {
      console.log(asciiQR); // Opcional para registrar o QR no terminal
      var matches = base64Qr.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/),
        response = {};
      if (matches.length !== 3) {
        return new Error('Invalid input string');
      }
      response.type = matches[1];
      response.data = new Buffer.from(matches[2], 'base64');
      var imageBuffer = response;
      require('fs').writeFile(
        'out.png',
        imageBuffer['data'],
        'binary',
        function (err) {
          if (err != null) {
            console.log(err);
          }
        }
      );
    },
    undefined,
    { logQR: false }
  )
  .then((client) => {
    start(client);
  })
  .catch((erro) => {
    console.log(erro);
  });
```
## Baixar arquivos

Puppeteer cuida do download do arquivo. A descriptografia est√° sendo feita como
o mais r√°pido poss√≠vel (supera m√©todos nativos). Suporta arquivos grandes!

```javascript
import fs = require('fs');
import mime = require('mime-types');
client.onMessage( async (message) => {
  if (message.isMedia === true || message.isMMS === true) {
    const buffer = await client.decryptFile(message);
    // Neste ponto voc√™ pode fazer o que quiser com o buffer
    // Provavelmente voc√™ quer escrev√™-lo em um arquivo
    const fileName = `some-file-name.${mime.extension(message.mimetype)}`;
    await fs.writeFile(fileName, buffer, (err) => {
      ...
    });
  }
});
```

